<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>data vis 2 assingment</title>
    <script src="https://cdn.jsdelivr.net/npm/vega@5.22.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.2.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.20.8"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

    <style>
        .bd-placeholder-img {
          font-size: 1.125rem;
          text-anchor: middle;
          -webkit-user-select: none;
          -moz-user-select: none;
          user-select: none;
        }
  
        @media (min-width: 768px) {
          .bd-placeholder-img-lg {
            font-size: 3.5rem;
          }
        }
  
        .b-example-divider {
          width: 100%;
          height: 3rem;
          background-color: rgba(0, 0, 0, .1);
          border: solid rgba(0, 0, 0, .15);
          border-width: 1px 0;
          box-shadow: inset 0 .5em 1.5em rgba(0, 0, 0, .1), inset 0 .125em .5em rgba(0, 0, 0, .15);
        }
  
        .b-example-vr {
          flex-shrink: 0;
          width: 1.5rem;
          height: 100vh;
        }
  
        .bi {
          vertical-align: -.125em;
          fill: currentColor;
        }
  
        .nav-scroller {
          position: relative;
          z-index: 2;
          height: 2.75rem;
          overflow-y: hidden;
        }
  
        .nav-scroller .nav {
          display: flex;
          flex-wrap: nowrap;
          padding-bottom: 1rem;
          margin-top: -1px;
          overflow-x: auto;
          text-align: center;
          white-space: nowrap;
          -webkit-overflow-scrolling: touch;
        }
  
        .btn-bd-primary {
          --bd-violet-bg: #712cf9;
          --bd-violet-rgb: 112.520718, 44.062154, 249.437846;
  
          --bs-btn-font-weight: 600;
          --bs-btn-color: var(--bs-white);
          --bs-btn-bg: var(--bd-violet-bg);
          --bs-btn-border-color: var(--bd-violet-bg);
          --bs-btn-hover-color: var(--bs-white);
          --bs-btn-hover-bg: #6528e0;
          --bs-btn-hover-border-color: #6528e0;
          --bs-btn-focus-shadow-rgb: var(--bd-violet-rgb);
          --bs-btn-active-color: var(--bs-btn-hover-color);
          --bs-btn-active-bg: #5a23c8;
          --bs-btn-active-border-color: #5a23c8;
        }
  
        .bd-mode-toggle {
          z-index: 1500;
        }
  
        .bd-mode-toggle .dropdown-menu .active .bi {
          display: block !important;
        }
      </style>
  
            <link href="page.css" rel="stylesheet">
    </head>


  <body>
  
    <main>
        <div class="position-relative overflow-hidden p-3 p-md-5 m-md-3 text-center bg-body-tertiary">
          <div class="col-md-6 p-lg-5 mx-auto my-5">
            <h1 class="display-3 fw-bold">Healthcare Insights</h1>
            <h3 class="fw-normal text-muted mb-3">Let's dive into the healthcare sector and analyse how different countries are providing care</h3>
          </div>
        </div>
      
        <div class="position-relative overflow-hidden p-3 p-md-5 m-md-3 text-center bg-body-tertiary">
            

            <div class="my-3 p-3">
                <h2 class="display-5">Infant and Maternal Care</h2>
                <p class="lead">Where are the best countries to give birth</p>


                

                <div class="d-md-flex flex-md-equal w-100 my-md-3 ps-md-3">
                  <div class="bg-body-tertiary me-md-3 pt-3 px-3 pt-md-5 px-md-5 text-center overflow-hidden">
                    <div class="my-3 py-3">
                      <p class="lead">Infant Mortality Rate</p>
                      <p>How many infants die per 1000 live births</p>
                      <div id="vis" style="width: 90%; height: 400px; border-radius: 21px 21px 0 0;"></div>

                      <div id="options">
                        <label for="xAxisSelect">Select X-Axis Variable:</label>
                        <select id="xAxisSelect">
                            <option value="Physicians per thousand">Physicians per thousand</option>
                            <option value="Birth Rate">Birth Rate</option>
                            <option value="CPI">CPI</option>
                            <option value="Fertility Rate">Fertility Rate</option>
                            <option value="Life expectancy">Life expectancy</option>
                        </select>
                    </div> 
  
                    </div>
                  </div>
                  <div class="bg-body-tertiary me-md-3 pt-3 px-3 pt-md-5 px-md-5 text-center overflow-hidden">
                      <div class="my-3 p-3">
                        <p>
                          In the provided visualization, we can observe a clear correlation between the number of physicians per thousand and infant mortality rate. 
                          Countries with a higher number of physicians per thousand people tend to have lower infant mortality rates. This is because more physicians allows for better access to healthcare services and medical attention, which can significantly reduce the number of infant deaths.
                          This highlights the importance of healthcare infrastructure in reducing infant mortality rates. Countries that invest in their healthcare systems by increasing the number of physicians and improving healthcare accessibility can effectively lower their infant mortality rates.

                        </p>
                        </br>
                        <p>
                          Looking by region (see map below), it can be seen that the African region in particular has a high infant mortality rate. 
                          This is due to factors like poverty, lack of education, war causing poorer living conditions, and lack of access to healthcare services.
                        </p>
                      </div>
                  </div>

                </div>
                    
            </div>
            <div class="my-3 py-3">
              <h2 class="display-5">Infant Care by Region</h2>
              <div id="map" style="width: 90%; height: 400px; border-radius: 21px 21px 0 0;"></div>
            </div>
            


            <div class="my-3 p-3">
              <h2 class="display-5">Quality of Life</h2>
              <p class="lead">Life expectancy - Developed vs Developing Countries</p>

            <div class="d-md-flex flex-md-equal w-100 my-md-3 ps-md-3">
              <div class="bg-body-tertiary me-md-3 pt-3 px-3 pt-md-5 px-md-5 text-center overflow-hidden">
                <div class="my-3 py-3">
                  <p class="lead">Developed</p>
                  <div id="m2" style="width: 90%; height: 400px; border-radius: 21px 21px 0 0;"></div>
                </div>
              </div>
              <div class="bg-body-tertiary me-md-3 pt-3 px-3 pt-md-5 px-md-5 text-center overflow-hidden">
                  <div class="my-3 p-3">
                    <p class="lead">Developing</p>
                    <div id="m2" style="width: 90%; height: 400px; border-radius: 21px 21px 0 0;"></div>
                  </div>
              </div>

            </div>
            </div>

              
              
              <div class="bg-body-tertiary me-md-3 pt-3 px-3 pt-md-5 px-md-5 text-center overflow-hidden">
                <h2 class="display-5">Another headline</h2>
              </div>

              <div class="d-md-flex flex-md-equal w-100 my-md-3 ps-md-3">
                <div class="bg-body-tertiary me-md-3 pt-3 px-3 pt-md-5 px-md-5 text-center overflow-hidden">
                  <div class="my-3 py-3">
                    <p class="lead">And an even wittier subheading.</p>
                    <div id="d2" style="height: 200px; border-radius: 21px 21px 0 0;"></div>

                  </div>
                </div>
                <div class="bg-body-tertiary me-md-3 pt-3 px-3 pt-md-5 px-md-5 text-center overflow-hidden">
                  <div class="my-3 p-3">
                    <p class="lead">And an even wittier subheading.</p>
                    <div id="d3" style="height: 200px; border-radius: 21px 21px 0 0;"></div>

                  </div>
                </div>
                <div class="bg-body-tertiary me-md-3 pt-3 px-3 pt-md-5 px-md-5 text-center overflow-hidden">
                  <div class="my-3 p-3">
                    <p class="lead">And an even wittier subheading.</p>
                    <div id="d4" style="height: 200px; border-radius: 21px 21px 0 0;"></div>

                  </div>
                </div>
                <div class="bg-body-tertiary me-md-3 pt-3 px-3 pt-md-5 px-md-5 text-center overflow-hidden">
                  <div class="my-3 p-3">
                    <p class="lead">And an even wittier subheading.</p>
                    <div id="d5" style="height: 200px; border-radius: 21px 21px 0 0;"></div>

                  </div>
                </div>
              </div>
              <div class="d-md-flex flex-md-equal w-100 my-md-3 ps-md-3">
                <div class="bg-body-tertiary me-md-3 pt-3 px-3 pt-md-5 px-md-5 text-center overflow-hidden">
                  <div class="my-3 py-3">
                    <p class="lead">And an even wittier subheading.</p>
                    <div id="d6" style="height: 200px; border-radius: 21px 21px 0 0;"></div>

                  </div>
                </div>
                <div class="bg-body-tertiary me-md-3 pt-3 px-3 pt-md-5 px-md-5 text-center overflow-hidden">
                  <div class="my-3 p-3">
                    <p class="lead">And an even wittier subheading.</p>
                    <div id="d7" style="height: 200px; border-radius: 21px 21px 0 0;"></div>

                  </div>
                </div>
                <div class="bg-body-tertiary me-md-3 pt-3 px-3 pt-md-5 px-md-5 text-center overflow-hidden">
                  <div class="my-3 p-3">
                    <p class="lead">And an even wittier subheading.</p>
                    <div id="d8" style="height: 200px; border-radius: 21px 21px 0 0;"></div>

                  </div>
                </div>

                <div class="bg-body-tertiary me-md-3 pt-3 px-3 pt-md-5 px-md-5 text-center overflow-hidden">
                  <div class="my-3 p-3">
                    <p class="lead">And an even wittier subheading.</p>
                    <div id="d1" style="height: 200px; border-radius: 21px 21px 0 0;"></div>
                  </div>
                </div>
              </div>

      
        <script>
            const xAxisSelect = document.getElementById("xAxisSelect");

        const emojiMapping = {
            'United States': '🇺🇸',
            'Canada': '🇨🇦',
            'United Kingdom': '🇬🇧',
            'Australia': '🇦🇺',
            'France': '🇫🇷',
            'Germany': '🇩🇪',
            'Japan': '🇯🇵',
            'China': '🇨🇳',
            'India': '🇮🇳',
            'Brazil': '🇧🇷',
            'Russia': '🇷🇺',
            'South Africa': '🇿🇦'
        };

        const spec = {
            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
            "width": 500,
            "height": 400,
            "data": {
                "url": "https://raw.githubusercontent.com/akanel15/FIT3179-assignment2/main/data/world-data-2023.csv"
            },
            "layer": [
                {
                    "mark": {"type": "point", 
                    "filled": true,
                    "color": "grey"
                    },

                    "encoding": {
                        "y": {"field": "Infant mortality", "type": "quantitative"},
                        "x": {"field": "Physicians per thousand", "type": "quantitative"},
                        "tooltip": [
                            {"field": "Country", "type": "ordinal", "title": "Country"},
                            {"field": "Infant mortality", "type": "quantitative", "title": "Infant mortality"},
                            {"field": "Physicians per thousand", "type": "quantitative", "title": "Physicians per thousand"}
                        ]
                    }
                },
                {
                    "mark": {
                      "type": "point", 
                    "filled": true,
                    "color": "green",
                    "size": "100"
                    },

                    "transform": [
                    {
                      "filter": "datum.Country === 'United States'",
                      "calculate": "{'United States': '🇺🇸'}[datum.Country]",
                      "as": "usa"
                    }],
                    "encoding": {
                        "y": {"field": "Infant mortality", "type": "quantitative"},
                        "x": {"field": "Physicians per thousand", "type": "quantitative"},
                        "tooltip": [
                            {"field": "Country", "type": "ordinal", "title": "Country"},
                            {"field": "Infant mortality", "type": "quantitative", "title": "Infant mortality"},
                            {"field": "Physicians per thousand", "type": "quantitative", "title": "Physicians per thousand"},                        ] 
                    }
                },
                {
                    "mark": {
                      "type": "point", 
                    "filled": true,
                    "color": "red",
                    "size": "100"
                  },

                    "transform": [
                    {
                      "filter": "datum.Country === 'Nigeria' || datum.Country === 'Democratic Republic of Congo' || datum.Country === 'Mali' || datum.Country === 'Angola' || datum.Country === 'Chad' || datum.Country === 'Guinea' || datum.Country === 'Sierra Leone' || datum.Country === 'Ivory Coast' || datum.Country === 'Central African Republic'",
                      "as": "africa"
                    }],
                    "encoding": {
                        "y": {"field": "Infant mortality", "type": "quantitative"},
                        "x": {"field": "Physicians per thousand", "type": "quantitative"},
                        "tooltip": [
                            {"field": "Country", "type": "ordinal", "title": "Country"},
                            {"field": "Infant mortality", "type": "quantitative", "title": "Infant mortality"},
                            {"field": "Physicians per thousand", "type": "quantitative", "title": "Physicians per thousand"},                        ] 
                    }
                },
                {
                    "mark": {
                      "type": "point", 
                    "filled": true,
                    "color": "red",
                    "size": "100"
                  },

                    "transform": [
                    {

                      "filter": "datum.Country === 'United Kingdom' || datum.Country === 'France' || datum.Country === 'Germany' || datum.Country === 'Italy' || datum.Country === 'Spain' || datum.Country === 'Greece' || datum.Country === 'Sweeden' || datum.Country === 'Romania' || datum.Country === 'Ukraine'",
                      "as": "European"
                    }],
                    "encoding": {
                        "y": {"field": "Infant mortality", "type": "quantitative"},
                        "x": {"field": "Physicians per thousand", "type": "quantitative"},
                        "tooltip": [
                            {"field": "Country", "type": "ordinal", "title": "Country"},
                            {"field": "Infant mortality", "type": "quantitative", "title": "Infant mortality"},
                            {"field": "Physicians per thousand", "type": "quantitative", "title": "Physicians per thousand"},                        ] 
                    }
                },
                {
                    "mark": {
                      "type": "point", 
                    "filled": true,
                    "color": "blue",
                    "size": "100"
                  },

                    "transform": [
                    {
                      "filter": "datum.Country === 'Australia'",
                      "as": "aus"
                    }],
                    "encoding": {
                        "y": {"field": "Infant mortality", "type": "quantitative"},
                        "x": {"field": "Physicians per thousand", "type": "quantitative"},
                        "tooltip": [
                            {"field": "Country", "type": "ordinal", "title": "Country"},
                            {"field": "Infant mortality", "type": "quantitative", "title": "Infant mortality"},
                            {"field": "Physicians per thousand", "type": "quantitative", "title": "Physicians per thousand"},                        ] 
                    }
                }
            ]
        };

        

                            /*
                    "transform": [
                        {
                            "filter": "datum.Country === 'United States' || datum.Country === 'Canada' || datum.Country === 'United Kingdom' || datum.Country === 'Australia' || datum.Country === 'France' || datum.Country === 'Germany' || datum.Country === 'Japan' || datum.Country === 'China' || datum.Country === 'India' || datum.Country === 'Brazil' || datum.Country === 'Russia' || datum.Country === 'South Africa'",
                            "calculate": "{'United States': '🇺🇸', 'Canada': '🇨🇦', 'United Kingdom': '🇬🇧', 'Australia': '🇦🇺', 'France': '🇫🷿, 'Germany': '🇩🇪', 'Japan': '🇯🇵', 'China': '🇨🇳', 'India': '🇮🇳', 'Brazil': '🇧🇷', 'Russia': '🇷🇺', 'South Africa': '🇿🇦'}[datum.Country]",
                            "as": "emoji"
                        }
                    ],
                    */

        xAxisSelect.addEventListener("change", () => {
          const selectedOption = xAxisSelect.value;
          spec.layer[0].encoding.x.field = selectedOption;
          spec.layer[0].encoding.x.title = selectedOption;
          spec.layer[1].encoding.x.field = selectedOption;
          spec.layer[0].encoding.tooltip[2].field = selectedOption;
          vegaEmbed("#vis", spec, {mode: "vega-lite", actions: false}).then(console.log).catch(console.warn);
        });

      vegaEmbed("#vis", spec, {mode: "vega-lite", actions: false}).then(console.log).catch(console.warn);

        // Path: js/interactive_scatter.js




        const spec2 = {
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "width": 900,
    "height": 500,

    "projection": { "type": "equirectangular" },
    "layer": [
        {
            "mark": { "type": "geoshape", "fill": "lightgray", "stroke": "white" }
        },
        {
            "data": {
                "url": "https://raw.githubusercontent.com/FIT3179/Vega-Lite/main/7_others/oceans.topojson",
                "format": { "type": "topojson", "feature": "oceans" }
            },
            "mark": { "type": "geoshape", "fill": "skyblue" }
        },
        {
            "data": {
                "url": "https://raw.githubusercontent.com/akanel15/FIT3179-assignment2/main/data/world-data-2023.csv",
                "format": { "type": "csv" }
            },
            "transform": [
                {
                  "calculate": "toNumber(replace(replace(datum.Population, ',', ''), ',', ''))",
                  "as": "Population"
                }
            ],
            "mark": "circle",
            "encoding": {
                "longitude": { "field": "Longitude", "type": "quantitative" },
                "latitude": { "field": "Latitude", "type": "quantitative" },
                "size": {"field": "Population","type": "quantitative",
                        "title": "Population",
                        "legend": {"labelFontSize": 12, "titleFontSize": 14},
                        "scale": {
                          "type": "linear", // Use a linear scale
                          "domain": [0, 20000000, 40000000, 60000000, 80000000, 100000000],  // Input
                          "range": [0,100,200,300,400,500]  // Output
                        }
                      },
                "color": {
                        "field": "Infant mortality",
                        "type": "quantitative",
                        "scale": {"scheme": "reds"},
                        "legend": {"direction": "horizontal", "labelFontSize": 12, "titleFontSize": 14},
                        "title": "Infant Mortality (death per 1000 live births)"
                    },

                "tooltip": [
                    {"field": "Country", "type": "ordinal", "title": "Country"},
                    { "field": "Infant mortality", "type": "nominal", "title": "Infant mortality"},
                    { "field": "Population", "type": "quantitative", "title": "Population"}
                ]
            }
        }
    ],
    "config": {}
};
  vegaEmbed("#map", spec2, {mode: "vega-lite", actions: false}).then(console.log).catch(console.warn);




  spec3 = {
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "data": {
      "url": "https://raw.githubusercontent.com/akanel15/FIT3179-assignment2/main/data/Life_Expectancy_Data.csv"
  },
  "title": "Life Expectancy for each country 2010-2020",
  "config": {
      "view": {
          "strokeWidth": 0,
          "step": 13
      },
      "axis": {
          "domain": false
      }
  },
  "mark": "rect",
  "encoding": {
      "x": {
          "field": "Year",
          "timeUnit": "year",
          "type": "ordinal",
          "title": "Year",
          "axis": {
              "labelAngle": 0,
              "format": "%e"
          }
      },
      "y": {
          "field": "Country",
          "type": "ordinal",
          "title": "Country"
      },
      "color": {
          "field": "Life expectancy ",
          "type": "quantitative",
          "legend": {"title": "Life Expectancy"},
          }
      }
  };
  vegaEmbed("#m2", spec3, {mode: "vega-lite", actions: false}).then(console.log).catch(console.warn);


  const countries = ["United States", "Canada", "United Kingdom", "Australia", "France", "Germany", "Japan", "China"];

for (let i = 0; i < 8; i++) {
    const country = countries[i];
    
    const spec = {
        "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
        "data": {
            "url": "https://raw.githubusercontent.com/akanel15/FIT3179-assignment2/main/data/Life_Expectancy_Data.csv"
        },
        "title": `Life Expectancy for ${country} 2010-2020`,
        "config": {
            "view": {
                "strokeWidth": 0,
                "step": 13
            },
            "axis": {
                "domain": false
            }
        },
        "mark": "line",
        "encoding": {
            "x": {
                "field": "Year",
                "timeUnit": "year",
                "type": "ordinal",
                "title": "Year",
                "axis": {
                    "labelAngle": 0,
                    "format": "%e"
                }
            },
            "y": {
                "field": "Life expectancy ",
                "type": "quantitative",
                "legend": {"title": "Life Expectancy"}
            },
            "filter": {
                "field": "Country",
                "equal": country
          }

          }        
      };
    
    const divId = `d${i + 1}`;
    
    vegaEmbed(`#${divId}`, spec, {mode: "vega-lite", actions: false}).then(console.log).catch(console.warn);
}



</script>
        

<!-- 
    <script src="js/interactive_scatter.js"></script>
    <script src="js/world_map_vis.js"></script>
-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
  </body>
</html> 